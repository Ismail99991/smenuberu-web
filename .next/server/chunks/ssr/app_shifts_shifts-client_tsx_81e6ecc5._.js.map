{"version":3,"sources":["../../../../app/shifts/shifts-client.tsx","../../../../components/day-tabs.tsx","../../../../lib/slots.ts","../../../../components/slot-card.tsx","../../../../lib/booking-state.ts","../../../../components/booking-modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport DayTabs from \"@/components/day-tabs\";\nimport SlotCard from \"@/components/slot-card\";\nimport BookingModal from \"@/components/booking-modal\";\nimport { addDays, getMockSlots, toISODateLocal } from \"@/lib/slots\";\nimport type { Slot } from \"@/lib/slots\";\n\nfunction getDaysWindow(from: Date, windowDays = 14) {\n  const out: string[] = [];\n  for (let i = 0; i < windowDays; i++) out.push(toISODateLocal(addDays(from, i)));\n  return out;\n}\n\n// авто-обновление “сегодня” в полночь\nfunction useAutoTodayRollover(onRollover: (now: Date) => void) {\n  useEffect(() => {\n    const tick = () => onRollover(new Date());\n\n    const now = new Date();\n    const nextMidnight = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate() + 1,\n      0,\n      0,\n      2\n    );\n    const msToMidnight = nextMidnight.getTime() - now.getTime();\n\n    const t1 = window.setTimeout(() => {\n      tick();\n      const t2 = window.setInterval(tick, 60_000);\n      // cleanup for interval\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      (t1 as any)._t2 = t2;\n    }, msToMidnight);\n\n    return () => {\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const maybe = (t1 as any)?._t2 as number | undefined;\n      if (maybe) window.clearInterval(maybe);\n      window.clearTimeout(t1);\n    };\n  }, [onRollover]);\n}\n\nexport default function ShiftsClient() {\n  const [q, setQ] = useState(\"\");\n  const [today, setToday] = useState<Date>(() => new Date());\n  const [selectedDay, setSelectedDay] = useState<string>(() => toISODateLocal(new Date()));\n\n  // окно дней 14 дней\n  const days = useMemo(() => getDaysWindow(today, 14), [today]);\n\n  // мок-слоты на окно\n  const slots = useMemo(() => getMockSlots(today, 14), [today]);\n\n  // red notch (горящие дни)\n  const hotDays = useMemo(() => {\n    const s = new Set<string>();\n    for (const x of slots) if (x.hot) s.add(x.date);\n    return s;\n  }, [slots]);\n\n  // blue notch (высокий тариф)\n  const premiumDays = useMemo(() => {\n    const s = new Set<string>();\n    for (const x of slots) if (x.pay >= 3500) s.add(x.date);\n    return s;\n  }, [slots]);\n\n  // полночь: пересчитать today + выбрать новый \"сегодня\"\n  const handleRollover = useCallback((now: Date) => {\n    setToday(now);\n    setSelectedDay(toISODateLocal(now));\n  }, []);\n  useAutoTodayRollover(handleRollover);\n\n  // если selectedDay выпал из окна (например, после rollover) — аккуратно поправим\n  useEffect(() => {\n    if (days.length === 0) return;\n    if (!days.includes(selectedDay)) {\n      setSelectedDay(days[0]);\n    }\n  }, [days, selectedDay]);\n\n  const filtered = useMemo(() => {\n    const s = q.trim().toLowerCase();\n    return slots\n      .filter((x) => x.date === selectedDay)\n      .filter((x) => {\n        if (!s) return true;\n        return [x.title, x.company, x.city].some((v) => v.toLowerCase().includes(s));\n      });\n  }, [q, selectedDay, slots]);\n\n  // модалка\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalPreset, setModalPreset] = useState<{ day: string; title?: string } | null>(null);\n\n  const onClose = useCallback(() => setModalOpen(false), []);\n\n  const openBooking = useCallback((slot: Slot) => {\n    setModalPreset({ day: slot.date, title: slot.title });\n    setModalOpen(true);\n  }, []);\n\n  return (\n    <div className=\"space-y-4\">\n      <DayTabs\n        days={days}\n        value={selectedDay}\n        onChange={setSelectedDay}\n        hotDays={hotDays}\n        premiumDays={premiumDays}\n      />\n\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-4\">\n        <input\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n          placeholder=\"Поиск: профессия, компания, город…\"\n          className=\"w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-900/10\"\n        />\n      </div>\n\n      {filtered.length === 0 ? (\n        <div className=\"rounded-2xl border border-zinc-200 bg-white p-5 text-sm text-zinc-600\">\n          На выбранную дату слотов нет. Листай дни табами сверху.\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {filtered.map((slot) => (\n            <SlotCard key={slot.id} slot={slot} onBook={openBooking} />\n          ))}\n        </div>\n      )}\n\n      <BookingModal\n        open={modalOpen}\n        onClose={onClose}\n        days={days}\n        slots={slots}\n        hotDays={hotDays}\n        premiumDays={premiumDays}\n        initialDay={modalPreset?.day ?? selectedDay}\n        initialTitle={modalPreset?.title}\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport { cn } from \"@/lib/cn\";\nimport { formatDayLabelRu, formatWeekdayShortRu } from \"@/lib/slots\";\n\ntype Props = {\n  days: string[];\n  value: string;\n  onChange: (iso: string) => void;\n  hotDays?: Set<string>;     // red notch\n  premiumDays?: Set<string>; // blue notch\n};\n\nexport default function DayTabs({ days, value, onChange, hotDays, premiumDays }: Props) {\n  return (\n    <div className=\"rounded-2xl border border-zinc-200 bg-white p-3\">\n      <div className=\"flex gap-2 overflow-x-auto pb-1 [-webkit-overflow-scrolling:touch]\">\n        {days.map((iso) => {\n          const active = iso === value;\n          const isHot = hotDays?.has(iso);\n          const isPremium = premiumDays?.has(iso);\n\n          return (\n            <button\n              key={iso}\n              onClick={() => onChange(iso)}\n              className={cn(\n                \"relative min-w-[92px] flex-shrink-0 rounded-2xl border px-3 py-2 text-left transition\",\n                active\n                  ? \"border-zinc-900 bg-zinc-900 text-white\"\n                  : \"border-zinc-200 bg-white text-zinc-800 hover:bg-zinc-50\"\n              )}\n            >\n              {/* notches */}\n              <div className=\"absolute right-2 top-2 flex items-center gap-1\">\n                {isPremium ? (\n                  <span\n                    className={cn(\"h-2 w-2 rounded-full\", active ? \"bg-sky-300\" : \"bg-sky-500\")}\n                    aria-label=\"Высокий тариф\"\n                    title=\"Высокий тариф\"\n                  />\n                ) : null}\n                {isHot ? (\n                  <span\n                    className={cn(\"h-2 w-2 rounded-full\", active ? \"bg-red-300\" : \"bg-red-500\")}\n                    aria-label=\"Горящие слоты\"\n                    title=\"Горящие слоты\"\n                  />\n                ) : null}\n              </div>\n\n              <div className={cn(\"text-xs\", active ? \"text-white/80\" : \"text-zinc-500\")}>\n                {formatWeekdayShortRu(iso)}\n              </div>\n              <div className=\"mt-0.5 text-sm font-semibold\">{formatDayLabelRu(iso)}</div>\n            </button>\n          );\n        })}\n      </div>\n\n      <div className=\"mt-2 flex flex-wrap gap-3 px-1 text-[11px] text-zinc-500\">\n        <div className=\"flex items-center gap-1\">\n          <span className=\"h-2 w-2 rounded-full bg-sky-500\" /> высокий тариф\n        </div>\n        <div className=\"flex items-center gap-1\">\n          <span className=\"h-2 w-2 rounded-full bg-red-500\" /> горящие слоты\n        </div>\n      </div>\n    </div>\n  );\n}\n","export type Slot = {\n  id: string;\n  date: string; // YYYY-MM-DD (local)\n  title: string;\n  company: string;\n  city: string;\n  address: string;\n  time: string; // \"10:00–19:00\"\n  pay: number;\n  hot?: boolean; // \"горящий слот\"\n  tags: string[];\n};\n\nexport function toISODateLocal(d: Date) {\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\n\nexport function addDays(d: Date, n: number) {\n  const x = new Date(d);\n  x.setDate(x.getDate() + n);\n  return x;\n}\n\nexport function formatDayLabelRu(isoDate: string) {\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { day: \"numeric\", month: \"short\" }).format(date);\n}\n\nexport function formatWeekdayShortRu(isoDate: string) {\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { weekday: \"short\" }).format(date);\n}\n\nexport function formatMoneyRub(amount: number) {\n  return new Intl.NumberFormat(\"ru-RU\").format(amount) + \" ₽\";\n}\n\n// Генератор “условных” слотов на 14 дней вперёд.\n// Горячие слоты: каждый 3-й день, и ещё один случайный слот в этот день.\nexport function getMockSlots(start: Date, days = 14): Slot[] {\n  const out: Slot[] = [];\n\n  for (let i = 0; i < days; i++) {\n    const date = toISODateLocal(addDays(start, i));\n\n    // 0..2 слота в день (чтобы были пустые дни)\n    const count = (i % 4 === 0) ? 0 : (i % 2 === 0 ? 2 : 1);\n    const hotDay = i % 3 === 0; // условно “горящие дни”\n\n    for (let j = 0; j < count; j++) {\n      const id = `${date}-slot-${j + 1}`;\n      const hot = hotDay && j === 0; // первый слот в “горящий день” — горячий\n\n      const template = (j % 3);\n      const base =\n        template === 0\n          ? {\n              title: \"Повар-универсал\",\n              company: \"Кафе «Лимон»\",\n              city: \"Берлин\",\n              address: \"Warschauer Str. 12\",\n              time: \"10:00–19:00\",\n              pay: 3500,\n              tags: [\"Питание\", \"Форма\"]\n            }\n          : template === 1\n            ? {\n                title: \"Официант\",\n                company: \"Ресторан «Север»\",\n                city: \"Берлин\",\n                address: \"Prenzlauer Allee 77\",\n                time: \"12:00–21:00\",\n                pay: 2800,\n                tags: [\"Чаевые\", \"Обучение\"]\n              }\n            : {\n                title: \"Кладовщик\",\n                company: \"Склад «Nord»\",\n                city: \"Потсдам\",\n                address: \"Industriestr. 4\",\n                time: \"08:00–17:00\",\n                pay: 3200,\n                tags: [\"Тёплый склад\"]\n              };\n\n      out.push({\n        id,\n        date,\n        hot,\n        ...base\n      });\n    }\n  }\n\n  return out;\n}\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Badge from \"@/components/badge\";\nimport type { Slot } from \"@/lib/slots\";\nimport { formatMoneyRub } from \"@/lib/slots\";\nimport { getBooking, setBooking, type BookingStatus } from \"@/lib/booking-state\";\n\nexport default function SlotCard({\n  slot,\n  onBook\n}: {\n  slot: Slot;\n  onBook: (slot: Slot) => void;\n}) {\n  const [status, setStatusLocal] = useState<BookingStatus>(\"none\");\n\n  useEffect(() => {\n    const rec = getBooking(slot.id);\n    setStatusLocal(rec.status);\n  }, [slot.id]);\n\n  const isPremium = slot.pay >= 3500;\n\n  return (\n    <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n      <div className=\"flex items-start justify-between gap-3\">\n        <div>\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <div className=\"text-base font-semibold\">{slot.title}</div>\n\n            {slot.hot ? (\n              <span className=\"inline-flex items-center rounded-full bg-red-50 px-2 py-0.5 text-xs font-medium text-red-700\">\n                Горящий\n              </span>\n            ) : null}\n\n            {isPremium ? (\n              <span className=\"inline-flex items-center rounded-full bg-sky-50 px-2 py-0.5 text-xs font-medium text-sky-700\">\n                Высокий тариф\n              </span>\n            ) : null}\n\n            {status === \"booked\" ? (\n              <span className=\"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-xs font-medium text-emerald-700\">\n                Записан\n              </span>\n            ) : null}\n\n            {status === \"cancelled\" ? (\n              <span className=\"inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-medium text-zinc-600\">\n                Отменено\n              </span>\n            ) : null}\n\n            {status === \"completed\" ? (\n              <span className=\"inline-flex items-center rounded-full bg-zinc-900 px-2 py-0.5 text-xs font-medium text-white\">\n                Завершено\n              </span>\n            ) : null}\n          </div>\n\n          <div className=\"mt-1 text-sm text-zinc-600\">\n            {slot.company} · {slot.city}\n          </div>\n        </div>\n\n        <div className=\"text-right\">\n          <div className=\"text-base font-semibold\">{formatMoneyRub(slot.pay)}</div>\n          <div className=\"mt-1 text-xs text-zinc-500\">{slot.time}</div>\n        </div>\n      </div>\n\n      <div className=\"mt-3 flex flex-wrap gap-2\">\n        {slot.tags.map((t) => (\n          <Badge key={t}>{t}</Badge>\n        ))}\n      </div>\n\n      <div className=\"mt-3 text-sm text-zinc-600\">{slot.address}</div>\n\n      {status === \"booked\" ? (\n        <div className=\"mt-4 grid gap-2\">\n          <button\n            onClick={() => {\n              setBooking(slot.id, \"cancelled\");\n              setStatusLocal(\"cancelled\");\n            }}\n            className=\"inline-flex w-full items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900\"\n          >\n            Отменить запись\n          </button>\n\n          {/* demo: завершено */}\n          <button\n            onClick={() => {\n              setBooking(slot.id, \"completed\");\n              setStatusLocal(\"completed\");\n            }}\n            className=\"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white\"\n          >\n            Отметить как завершено (demo)\n          </button>\n        </div>\n      ) : status === \"completed\" ? (\n        <div className=\"mt-4 rounded-xl border border-zinc-200 bg-zinc-50 p-3 text-sm text-zinc-700\">\n          Смена завершена. Оценка смены — в профиле.\n        </div>\n      ) : (\n        <button\n          onClick={() => onBook(slot)}\n          className=\"mt-4 inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white\"\n        >\n          Записаться\n        </button>\n      )}\n    </div>\n  );\n}\n","export type BookingStatus = \"none\" | \"booked\" | \"cancelled\" | \"completed\";\n\nexport type BookingRecord = {\n  status: BookingStatus;\n  updatedAt: number;\n};\n\nconst key = (slotId: string) => `slot_booking_${slotId}`;\n\nexport function getBooking(slotId: string): BookingRecord {\n  if (typeof window === \"undefined\") return { status: \"none\", updatedAt: 0 };\n\n  const raw = window.localStorage.getItem(key(slotId));\n  if (!raw) return { status: \"none\", updatedAt: 0 };\n\n  try {\n    const parsed = JSON.parse(raw) as BookingRecord;\n    if (!parsed?.status) return { status: \"none\", updatedAt: 0 };\n    return parsed;\n  } catch {\n    // старый формат (если был \"booked\" строкой)\n    if (raw === \"booked\") return { status: \"booked\", updatedAt: Date.now() };\n    return { status: \"none\", updatedAt: 0 };\n  }\n}\n\nexport function setBooking(slotId: string, status: BookingStatus) {\n  if (typeof window === \"undefined\") return;\n  const rec: BookingRecord = { status, updatedAt: Date.now() };\n  window.localStorage.setItem(key(slotId), JSON.stringify(rec));\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport DayTabs from \"@/components/day-tabs\";\nimport type { Slot } from \"@/lib/slots\";\nimport { getBooking, setBooking } from \"@/lib/booking-state\";\nimport { formatMoneyRub } from \"@/lib/slots\";\n\ntype Range = { start: number; end: number }; // minutes\n\nfunction parseRangeMinutes(timeRange: string): Range {\n  // \"08:00–15:00\"\n  const [aRaw, bRaw] = timeRange.split(\"–\").map((x) => x.trim());\n  const [ah, am] = (aRaw ?? \"00:00\").split(\":\").map(Number);\n  const [bh, bm] = (bRaw ?? \"00:00\").split(\":\").map(Number);\n  const start = (ah || 0) * 60 + (am || 0);\n  const end = (bh || 0) * 60 + (bm || 0);\n  return { start, end };\n}\n\nfunction overlaps(a: Range, b: Range) {\n  return a.start < b.end && b.start < a.end;\n}\n\nexport default function BookingModal({\n  open,\n  onClose,\n  days,\n  slots,\n  hotDays,\n  premiumDays,\n  initialDay,\n  initialTitle\n}: {\n  open: boolean;\n  onClose: () => void;\n  days: string[];\n  slots: Slot[];\n  hotDays: Set<string>;\n  premiumDays: Set<string>;\n  initialDay: string;\n  initialTitle?: string;\n}) {\n  const [day, setDay] = useState(initialDay);\n  const [selected, setSelected] = useState<string[]>([]);\n  const [onlyConsecutive, setOnlyConsecutive] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // reset при открытии\n  useEffect(() => {\n    if (open) {\n      setDay(initialDay);\n      setSelected([]);\n      setOnlyConsecutive(true);\n      setError(null);\n    }\n  }, [open, initialDay]);\n\n  const daySlots = useMemo(() => {\n    const list = slots.filter((s) => s.date === day);\n    return list.sort((a, b) => parseRangeMinutes(a.time).start - parseRangeMinutes(b.time).start);\n  }, [slots, day]);\n\n  const idsOrdered = useMemo(() => daySlots.map((s) => s.id), [daySlots]);\n\n  const daySlotById = useMemo(() => {\n    const m = new Map<string, Slot>();\n    for (const s of daySlots) m.set(s.id, s);\n    return m;\n  }, [daySlots]);\n\n  const selectedSlots = useMemo(\n    () => selected.map((id) => daySlotById.get(id)).filter(Boolean) as Slot[],\n    [selected, daySlotById]\n  );\n\n  const totalPay = useMemo(() => selectedSlots.reduce((sum, s) => sum + s.pay, 0), [selectedSlots]);\n\n  const isBooked = (slotId: string) => getBooking(slotId).status === \"booked\";\n\n  // ЧИСТАЯ проверка: можно ли добавить слот без пересечений с выбранными/уже забронированными\n  const canSelectWithoutOverlap = (slotId: string) => {\n    const slot = daySlotById.get(slotId);\n    if (!slot) return false;\n\n    const r = parseRangeMinutes(slot.time);\n\n    // 1) не пересекаться с выбранными\n    for (const sid of selected) {\n      if (sid === slotId) continue;\n      const other = daySlotById.get(sid);\n      if (!other) continue;\n      if (overlaps(r, parseRangeMinutes(other.time))) return false;\n    }\n\n    // 2) не пересекаться с уже booked в этот день\n    for (const s of daySlots) {\n      if (!isBooked(s.id)) continue;\n      if (s.id === slotId) continue;\n      if (overlaps(r, parseRangeMinutes(s.time))) return false;\n    }\n\n    return true;\n  };\n\n  // ЧИСТАЯ проверка: режим “подряд” (только соседние по списку)\n  const canAddConsecutive = (slotId: string) => {\n    if (!onlyConsecutive) return true;\n    if (selected.length === 0) return true;\n\n    const idx = idsOrdered.indexOf(slotId);\n    if (idx === -1) return false;\n\n    const selectedIdxs = selected\n      .map((x) => idsOrdered.indexOf(x))\n      .filter((x) => x >= 0)\n      .sort((a, b) => a - b);\n\n    const min = selectedIdxs[0];\n    const max = selectedIdxs[selectedIdxs.length - 1];\n    return idx === min - 1 || idx === max + 1;\n  };\n\n  // ЧИСТАЯ проверка: можно ли выбрать (не booked, не пересекается, и подряд если включено)\n  const canSelect = (slotId: string) => {\n    if (selected.includes(slotId)) return true; // снятие разрешаем всегда\n    if (isBooked(slotId)) return false;\n    if (!canSelectWithoutOverlap(slotId)) return false;\n    if (!canAddConsecutive(slotId)) return false;\n    return true;\n  };\n\n  const toggle = (slotId: string) => {\n    setSelected((prev) => {\n      // снять\n      if (prev.includes(slotId)) {\n        setError(null);\n        return prev.filter((x) => x !== slotId);\n      }\n\n      // добавить\n      if (!canSelect(slotId)) {\n        // объясняем причину\n        if (isBooked(slotId)) {\n          setError(\"Этот слот уже забронирован.\");\n        } else if (!canSelectWithoutOverlap(slotId)) {\n          setError(\"Нельзя выбрать: слот пересекается по времени с выбранным или уже забронированным.\");\n        } else if (!canAddConsecutive(slotId)) {\n          setError(\"В режиме “подряд” можно добавлять только соседние слоты (слева/справа).\");\n        } else {\n          setError(\"Нельзя выбрать этот слот.\");\n        }\n        return prev;\n      }\n\n      setError(null);\n      return [...prev, slotId];\n    });\n  };\n\n  if (!open) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50\">\n      <div className=\"absolute inset-0 bg-black/40\" onClick={onClose} />\n      <div className=\"absolute left-1/2 top-4 w-[min(560px,calc(100%-16px))] -translate-x-1/2\">\n        <div className=\"rounded-2xl border border-zinc-200 bg-white shadow-lg\">\n          <div className=\"flex items-start justify-between gap-3 border-b border-zinc-200 p-4\">\n            <div>\n              <div className=\"text-sm text-zinc-500\">Запись на слоты</div>\n              <div className=\"text-base font-semibold\">{initialTitle ?? \"Выбери дату и слоты\"}</div>\n            </div>\n            <button onClick={onClose} className=\"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm\">\n              Закрыть\n            </button>\n          </div>\n\n          <div className=\"space-y-3 p-4\">\n            <DayTabs\n              days={days}\n              value={day}\n              onChange={(d) => {\n                setDay(d);\n                setSelected([]);\n                setError(null);\n              }}\n              hotDays={hotDays}\n              premiumDays={premiumDays}\n            />\n\n            <div className=\"flex items-center justify-between gap-3 rounded-2xl border border-zinc-200 bg-white p-3\">\n              <div>\n                <div className=\"text-sm font-medium\">Выбирать “подряд”</div>\n                <div className=\"text-xs text-zinc-500\">Вкл — только соседние слоты, плюс запрет пересечений по времени.</div>\n              </div>\n              <button\n                onClick={() => {\n                  setOnlyConsecutive((v) => !v);\n                  setSelected([]);\n                  setError(null);\n                }}\n                className=\"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm\"\n              >\n                {onlyConsecutive ? \"Вкл\" : \"Выкл\"}\n              </button>\n            </div>\n\n            {error ? (\n              <div className=\"rounded-2xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800\">\n                {error}\n              </div>\n            ) : null}\n\n            {daySlots.length === 0 ? (\n              <div className=\"rounded-2xl border border-zinc-200 bg-white p-4 text-sm text-zinc-600\">\n                На этот день слотов нет. Листай табы сверху.\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {daySlots.map((s) => {\n                  const checked = selected.includes(s.id);\n                  const booked = isBooked(s.id);\n\n                  // ВАЖНО: canSelect() ЧИСТАЯ и НЕ setState\n                  const disabled = !checked && !canSelect(s.id);\n\n                  return (\n                    <button\n                      key={s.id}\n                      onClick={() => toggle(s.id)}\n                      disabled={disabled}\n                      className={[\n                        \"w-full rounded-2xl border p-4 text-left transition\",\n                        checked ? \"border-zinc-900 bg-zinc-50\" : \"border-zinc-200 hover:bg-zinc-50\",\n                        disabled ? \"opacity-50 cursor-not-allowed\" : \"\"\n                      ].join(\" \")}\n                      title={booked ? \"Уже записан на этот слот\" : undefined}\n                    >\n                      <div className=\"flex items-start justify-between gap-3\">\n                        <div>\n                          <div className=\"flex items-center gap-2\">\n                            <span\n                              className={[\n                                \"inline-flex h-5 w-5 items-center justify-center rounded-md border text-xs\",\n                                checked ? \"border-zinc-900 bg-zinc-900 text-white\" : \"border-zinc-300 bg-white\"\n                              ].join(\" \")}\n                            >\n                              {checked ? \"✓\" : \"\"}\n                            </span>\n\n                            <div className=\"font-semibold\">\n                              {s.title}\n                              {s.hot ? <span className=\"ml-2 text-xs text-red-600\">• горячий</span> : null}\n                              {s.pay >= 3500 ? <span className=\"ml-2 text-xs text-sky-700\">• высокий тариф</span> : null}\n                              {booked ? <span className=\"ml-2 text-xs text-emerald-700\">• уже записан</span> : null}\n                            </div>\n                          </div>\n\n                          <div className=\"mt-1 text-sm text-zinc-600\">\n                            {s.company} · {s.city}\n                          </div>\n                        </div>\n\n                        <div className=\"text-right\">\n                          <div className=\"text-sm font-semibold\">{s.time}</div>\n                          <div className=\"text-xs text-zinc-500\">{formatMoneyRub(s.pay)}</div>\n                        </div>\n                      </div>\n                    </button>\n                  );\n                })}\n              </div>\n            )}\n\n            <div className=\"rounded-2xl border border-zinc-200 bg-white p-4 text-sm\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-zinc-600\">Выбрано слотов:</span>\n                <span className=\"font-semibold\">{selected.length}</span>\n              </div>\n              <div className=\"mt-1 flex items-center justify-between\">\n                <span className=\"text-zinc-600\">Итого оплата:</span>\n                <span className=\"font-semibold\">{formatMoneyRub(totalPay)}</span>\n              </div>\n            </div>\n\n            <button\n              disabled={selected.length === 0}\n              onClick={() => {\n                // финальная проверка пересечений внутри selected (на всякий)\n                const ranges = selectedSlots.map((s) => ({ id: s.id, r: parseRangeMinutes(s.time) }));\n                for (let i = 0; i < ranges.length; i++) {\n                  for (let j = i + 1; j < ranges.length; j++) {\n                    if (overlaps(ranges[i].r, ranges[j].r)) {\n                      setError(\"Есть пересекающиеся по времени слоты. Убери конфликт и попробуй снова.\");\n                      return;\n                    }\n                  }\n                }\n\n                for (const id of selected) setBooking(id, \"booked\");\n                onClose();\n              }}\n              className=\"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white disabled:opacity-50\"\n            >\n              Подтвердить запись ({selected.length})\n            </button>\n\n            <div className=\"text-xs text-zinc-500\">\n              UI-only: бронь сохраняется в localStorage. Пересечения по времени запрещены.\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}