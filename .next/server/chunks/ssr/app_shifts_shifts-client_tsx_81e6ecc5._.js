module.exports=[40047,a=>{"use strict";var b=a.i(353),c=a.i(42924),d=a.i(64396);let e=(0,d.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),f=(0,d.default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);var g=a.i(69767);function h(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}function i(a,b){let c=new Date(a);return c.setDate(c.getDate()+b),c}function j(a){return new Intl.NumberFormat("ru-RU").format(a)+" ₽"}let k=(0,d.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),l=(0,d.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function m(a,b){let c=new Date(a);return c.setDate(c.getDate()+b),c}function n(a){return(a.getDay()+6)%7}function o({month:a,value:d,onChange:e,availableDays:f,hotDays:h,premiumDays:i}){let j=(0,c.useMemo)(()=>{let b=new Date(a.getFullYear(),a.getMonth(),1),c=new Date(a.getFullYear(),a.getMonth()+1,0),d=m(b,-n(b)),e=m(c,6-n(c)),f=[];for(let b=d;b<=e;b=m(b,1))f.push({iso:function(a){let b=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0");return`${b}-${c}-${d}`}(b),inMonth:b.getMonth()===a.getMonth()});return{title:new Intl.DateTimeFormat("ru-RU",{month:"long",year:"numeric"}).format(a),days:f}},[a]);return(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,b.jsx)("div",{className:"px-1 pb-2 text-sm font-semibold capitalize",children:j.title}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 px-1 pb-2 text-[11px] text-zinc-500",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(a=>(0,b.jsx)("div",{className:"text-center",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 gap-1 px-1",children:j.days.map(({iso:a,inMonth:c})=>{let j=Number(a.slice(8,10)),k=a===d,l=!f||f.has(a),m=h?.has(a),n=i?.has(a);return(0,b.jsxs)("button",{onClick:()=>e(a),className:(0,g.cn)("relative h-10 rounded-xl border text-sm transition",k?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white text-zinc-900 hover:bg-zinc-50",c?"":"opacity-50",l?"":"opacity-60"),title:l?void 0:"Слотов нет (пока)",children:[(0,b.jsx)("span",{className:(0,g.cn)("font-medium",k?"text-white":"text-zinc-900"),children:j}),(0,b.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1",children:[n?(0,b.jsx)("span",{className:(0,g.cn)("h-2 w-2 rounded-full",k?"bg-sky-300":"bg-sky-500")}):null,m?(0,b.jsx)("span",{className:(0,g.cn)("h-2 w-2 rounded-full",k?"bg-red-300":"bg-red-500")}):null]})]},a)})})]})}function p({days:a,value:c,onChange:d,hotDays:e,premiumDays:f,calendarOpen:h,onToggleCalendar:i,month:j,availableDays:m}){return(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,b.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2 px-1",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Календарь"}),i?(0,b.jsxs)("button",{onClick:i,className:"inline-flex items-center gap-1 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm","aria-label":"Переключить календарь",children:[h?"Табы":"Месяц",h?(0,b.jsx)(l,{className:"h-4 w-4"}):(0,b.jsx)(k,{className:"h-4 w-4"})]}):null]}),h?(0,b.jsx)(o,{month:j??new Date,value:c,onChange:d,availableDays:m,hotDays:e,premiumDays:f}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 [-webkit-overflow-scrolling:touch]",children:a.map(a=>{let h=a===c,i=e?.has(a),j=f?.has(a);return(0,b.jsxs)("button",{onClick:()=>d(a),className:(0,g.cn)("relative min-w-[92px] flex-shrink-0 rounded-2xl border px-3 py-2 text-left transition",h?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white text-zinc-800 hover:bg-zinc-50"),children:[(0,b.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1",children:[j?(0,b.jsx)("span",{className:(0,g.cn)("h-2 w-2 rounded-full",h?"bg-sky-300":"bg-sky-500"),title:"Высокий тариф"}):null,i?(0,b.jsx)("span",{className:(0,g.cn)("h-2 w-2 rounded-full",h?"bg-red-300":"bg-red-500"),title:"Горящие слоты"}):null]}),(0,b.jsx)("div",{className:(0,g.cn)("text-xs",h?"text-white/80":"text-zinc-500"),children:function(a){let[b,c,d]=a.split("-").map(Number),e=new Date(b,c-1,d);return new Intl.DateTimeFormat("ru-RU",{weekday:"short"}).format(e)}(a)}),(0,b.jsx)("div",{className:"mt-0.5 text-sm font-semibold",children:function(a){let[b,c,d]=a.split("-").map(Number),e=new Date(b,c-1,d);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(e)}(a)})]},a)})}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-3 px-1 text-[11px] text-zinc-500",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-sky-500"})," высокий тариф"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500"})," горящие слоты"]})]})]})]})}var q=a.i(27690);function r(a){return{status:"none",updatedAt:0}}function s(a,b){}let t=(0,d.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),u=(0,d.default)("shopping-basket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]),v=(0,d.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),w=(0,d.default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var x=a.i(66912);let y=(0,d.default)("spray-can",[["path",{d:"M3 3h.01",key:"159qn6"}],["path",{d:"M7 5h.01",key:"1hq22a"}],["path",{d:"M11 7h.01",key:"1osv80"}],["path",{d:"M3 7h.01",key:"1xzrh3"}],["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{width:"4",height:"4",x:"15",y:"5",key:"mri9e4"}],["path",{d:"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2",key:"aib6hk"}],["path",{d:"m13 14 8-2",key:"1d7bmk"}],["path",{d:"m13 19 8-2",key:"1y2vml"}]]),z={driver:t,picker:u,loader:v,cook:w,waiter:x.User,cleaner:y,other:x.User};function A({type:a,className:c}){let d=z[a]??z.other;return(0,b.jsx)(d,{className:c??"h-5 w-5"})}function B({slot:a,onBook:d}){let[e,f]=(0,c.useState)("none");(0,c.useEffect)(()=>{f(r(a.id).status)},[a.id]);let g=a.pay>=3500;return(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-5",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(A,{type:a.type,className:"h-5 w-5 text-zinc-700"}),(0,b.jsx)("div",{className:"text-base font-semibold",children:a.title})]}),a.hot?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2 py-0.5 text-xs font-medium text-red-700",children:"Горящий"}):null,g?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-sky-50 px-2 py-0.5 text-xs font-medium text-sky-700",children:"Высокий тариф"}):null,"booked"===e?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-xs font-medium text-emerald-700",children:"Записан"}):null,"cancelled"===e?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-medium text-zinc-600",children:"Отменено"}):null,"completed"===e?(0,b.jsx)("span",{className:"inline-flex items-center rounded-full bg-zinc-900 px-2 py-0.5 text-xs font-medium text-white",children:"Завершено"}):null]}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-zinc-600",children:[a.company," · ",a.city]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-base font-semibold",children:j(a.pay)}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:a.time})]})]}),(0,b.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:a.tags.map(a=>(0,b.jsx)(q.default,{children:a},a))}),(0,b.jsx)("div",{className:"mt-3 text-sm text-zinc-600",children:a.address}),"booked"===e?(0,b.jsxs)("div",{className:"mt-4 grid gap-2",children:[(0,b.jsx)("button",{onClick:()=>{s(a.id,"cancelled"),f("cancelled")},className:"inline-flex w-full items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900",children:"Отменить запись"}),(0,b.jsx)("button",{onClick:()=>{s(a.id,"completed"),f("completed")},className:"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Отметить как завершено (demo)"})]}):"completed"===e?(0,b.jsx)("div",{className:"mt-4 rounded-xl border border-zinc-200 bg-zinc-50 p-3 text-sm text-zinc-700",children:"Смена завершена. Оценка смены — в профиле."}):(0,b.jsx)("button",{onClick:()=>d(a),className:"mt-4 inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Записаться"})]})}function C(a){let[b,c]=a.split("–").map(a=>a.trim()),[d,e]=(b??"00:00").split(":").map(Number),[f,g]=(c??"00:00").split(":").map(Number);return{start:60*(d||0)+(e||0),end:60*(f||0)+(g||0)}}function D(a,b){return a.start<b.end&&b.start<a.end}function E({open:a,onClose:d,days:e,slots:f,hotDays:g,premiumDays:h,initialDay:i,initialTitle:k}){let[l,m]=(0,c.useState)(i),[n,o]=(0,c.useState)([]),[q,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)(null);(0,c.useEffect)(()=>{a&&(m(i),o([]),t(!0),v(null))},[a,i]);let w=(0,c.useMemo)(()=>f.filter(a=>a.date===l).sort((a,b)=>C(a.time).start-C(b.time).start),[f,l]),x=(0,c.useMemo)(()=>w.map(a=>a.id),[w]),y=(0,c.useMemo)(()=>{let a=new Map;for(let b of w)a.set(b.id,b);return a},[w]),z=(0,c.useMemo)(()=>n.map(a=>y.get(a)).filter(Boolean),[n,y]),A=(0,c.useMemo)(()=>z.reduce((a,b)=>a+b.pay,0),[z]),B=a=>"booked"===r(a).status,E=a=>{let b=y.get(a);if(!b)return!1;let c=C(b.time);for(let b of n){if(b===a)continue;let d=y.get(b);if(d&&D(c,C(d.time)))return!1}for(let b of w)if(B(b.id)&&b.id!==a&&D(c,C(b.time)))return!1;return!0},F=a=>{if(!q||0===n.length)return!0;let b=x.indexOf(a);if(-1===b)return!1;let c=n.map(a=>x.indexOf(a)).filter(a=>a>=0).sort((a,b)=>a-b),d=c[0],e=c[c.length-1];return b===d-1||b===e+1},G=a=>!!n.includes(a)||!B(a)&&!!E(a)&&!!F(a);return a?(0,b.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:d}),(0,b.jsx)("div",{className:"absolute left-1/2 top-4 w-[min(560px,calc(100%-16px))] -translate-x-1/2",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Запись на слоты"}),(0,b.jsx)("div",{className:"text-base font-semibold",children:k??"Выбери дату и слоты"})]}),(0,b.jsx)("button",{onClick:d,className:"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:"Закрыть"})]}),(0,b.jsxs)("div",{className:"space-y-3 p-4",children:[(0,b.jsx)(p,{days:e,value:l,onChange:a=>{m(a),o([]),v(null)},hotDays:g,premiumDays:h}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:"Выбирать “подряд”"}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Вкл — только соседние слоты, плюс запрет пересечений по времени."})]}),(0,b.jsx)("button",{onClick:()=>{t(a=>!a),o([]),v(null)},className:"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:q?"Вкл":"Выкл"})]}),u?(0,b.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:u}):null,0===w.length?(0,b.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 text-sm text-zinc-600",children:"На этот день слотов нет. Листай табы сверху."}):(0,b.jsx)("div",{className:"space-y-2",children:w.map(a=>{let c=n.includes(a.id),d=B(a.id),e=!c&&!G(a.id);return(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void o(a=>a.includes(b)?(v(null),a.filter(a=>a!==b)):G(b)?(v(null),[...a,b]):(B(b)?v("Этот слот уже забронирован."):E(b)?F(b)?v("Нельзя выбрать этот слот."):v("В режиме “подряд” можно добавлять только соседние слоты (слева/справа)."):v("Нельзя выбрать: слот пересекается по времени с выбранным или уже забронированным."),a))},disabled:e,className:["w-full rounded-2xl border p-4 text-left transition",c?"border-zinc-900 bg-zinc-50":"border-zinc-200 hover:bg-zinc-50",e?"opacity-50 cursor-not-allowed":""].join(" "),title:d?"Уже записан на этот слот":void 0,children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:["inline-flex h-5 w-5 items-center justify-center rounded-md border text-xs",c?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-300 bg-white"].join(" "),children:c?"✓":""}),(0,b.jsxs)("div",{className:"font-semibold",children:[a.title,a.hot?(0,b.jsx)("span",{className:"ml-2 text-xs text-red-600",children:"• горячий"}):null,a.pay>=3500?(0,b.jsx)("span",{className:"ml-2 text-xs text-sky-700",children:"• высокий тариф"}):null,d?(0,b.jsx)("span",{className:"ml-2 text-xs text-emerald-700",children:"• уже записан"}):null]})]}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-zinc-600",children:[a.company," · ",a.city]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:a.time}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:j(a.pay)})]})]})},a.id)})}),(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-zinc-600",children:"Выбрано слотов:"}),(0,b.jsx)("span",{className:"font-semibold",children:n.length})]}),(0,b.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-zinc-600",children:"Итого оплата:"}),(0,b.jsx)("span",{className:"font-semibold",children:j(A)})]})]}),(0,b.jsxs)("button",{disabled:0===n.length,onClick:()=>{let a=z.map(a=>({id:a.id,r:C(a.time)}));for(let b=0;b<a.length;b++)for(let c=b+1;c<a.length;c++)if(D(a[b].r,a[c].r))return void v("Есть пересекающиеся по времени слоты. Убери конфликт и попробуй снова.");for(let a of n)s(a,"booked");d()},className:"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white disabled:opacity-50",children:["Подтвердить запись (",n.length,")"]}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"UI-only: бронь сохраняется в localStorage. Пересечения по времени запрещены."})]})]})})]}):null}let F=(0,d.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),G=[{value:"driver",label:"Водитель / логистика"},{value:"picker",label:"Сборщик"},{value:"loader",label:"Грузчик"},{value:"cook",label:"Повар"},{value:"waiter",label:"Официант"},{value:"cleaner",label:"Уборка"},{value:"other",label:"Другое"}];function H({open:a,onClose:c,value:d,onChange:e}){return a?(0,b.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:c}),(0,b.jsx)("div",{className:"absolute left-1/2 top-6 w-[min(560px,calc(100%-16px))] -translate-x-1/2",children:(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white shadow-lg",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Задания"}),(0,b.jsx)("div",{className:"text-base font-semibold",children:"Сортировать и фильтровать"})]}),(0,b.jsx)("button",{onClick:c,className:"rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Закрыть",children:(0,b.jsx)(F,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"space-y-4 p-4",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Сортировка"}),(0,b.jsx)("div",{className:"mt-3 grid gap-2",children:[{k:"relevance",label:"По умолчанию"},{k:"pay_desc",label:"По цене: сначала дороже"},{k:"pay_asc",label:"По цене: сначала дешевле"},{k:"premium_first",label:"Сначала высокий тариф"},{k:"near",label:"По близости (пока заглушка)"}].map(a=>(0,b.jsx)("button",{onClick:()=>e({...d,sort:a.k}),className:["w-full rounded-xl border px-3 py-2 text-left text-sm",d.sort===a.k?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white hover:bg-zinc-50"].join(" "),children:a.label},a.k))})]}),(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Фильтры"}),(0,b.jsxs)("div",{className:"mt-3 grid gap-2",children:[(0,b.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:[(0,b.jsx)("span",{children:"Только “горящие”"}),(0,b.jsx)("input",{type:"checkbox",checked:d.onlyHot,onChange:a=>e({...d,onlyHot:a.target.checked}),className:"h-4 w-4"})]}),(0,b.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:[(0,b.jsx)("span",{children:"Только “высокий тариф”"}),(0,b.jsx)("input",{type:"checkbox",checked:d.onlyPremium,onChange:a=>e({...d,onlyPremium:a.target.checked}),className:"h-4 w-4"})]})]}),(0,b.jsx)("div",{className:"mt-4 text-sm font-semibold",children:"Тип задания"}),(0,b.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:G.map(a=>(0,b.jsx)("button",{onClick:()=>{var b;let c;return b=a.value,c=d.types.includes(b)?d.types.filter(a=>a!==b):[...d.types,b],void e({...d,types:c})},className:["rounded-full border px-3 py-1 text-sm",d.types.includes(a.value)?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white hover:bg-zinc-50"].join(" "),children:a.label},a.value))}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Если типы не выбраны — показываем все."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,b.jsx)("button",{onClick:()=>{e({onlyHot:!1,onlyPremium:!1,types:[],sort:"relevance"})},className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900",children:"Сбросить"}),(0,b.jsx)("button",{onClick:c,className:"inline-flex items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Применить"})]}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"UI-only: “близость” сейчас считается условно (детерминированно по городу/адресу)."})]})]})})]}):null}function I(a){let b=`${a.city}|${a.address}|${a.company}`,c=0;for(let a=0;a<b.length;a++)c=31*c+b.charCodeAt(a)>>>0;return c}function J(){var a;let[d,g]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(()=>new Date),[n,o]=(0,c.useState)(()=>h(new Date)),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(()=>new Date),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)({onlyHot:!1,onlyPremium:!1,types:[],sort:"relevance"}),y=(0,c.useMemo)(()=>(function(a,b=14){let c=[];for(let d=0;d<b;d++)c.push(h(i(a,d)));return c})(l,14),[l]),z=(0,c.useMemo)(()=>(function(a,b=14){let c=[];for(let d=0;d<b;d++){let b=h(i(a,d)),e=d%4==0?0:d%2==0?2:1,f=d%3==0;for(let a=0;a<e;a++){let d=`${b}-slot-${a+1}`,e=f&&0===a,g=a%4,h=0===g?{type:"cook",title:"Повар-универсал",company:"Кафе «Лимон»",city:"Берлин",address:"Warschauer Str. 12",time:"10:00–19:00",pay:3500,tags:["Питание","Форма"]}:1===g?{type:"waiter",title:"Официант",company:"Ресторан «Север»",city:"Берлин",address:"Prenzlauer Allee 77",time:"12:00–21:00",pay:2800,tags:["Чаевые","Обучение"]}:2===g?{type:"loader",title:"Грузчик (склад)",company:"Склад «Nord»",city:"Потсдам",address:"Industriestr. 4",time:"08:00–15:00",pay:3200,tags:["Тёплый склад","Физ. нагрузка"]}:{type:"driver",title:"Водитель (забор → доставка)",company:"Логистика «Sprint»",city:"Берлин",address:"Pickup: Alexanderplatz",time:"14:00–19:00",pay:4200,tags:["Кат. B","Навигация"]};c.push({id:d,date:b,hot:e,...h})}}return c})(l,14),[l]),A=(0,c.useMemo)(()=>new Set(z.map(a=>a.date)),[z]),C=(0,c.useMemo)(()=>{let a=new Set;for(let b of z)b.hot&&a.add(b.date);return a},[z]),D=(0,c.useMemo)(()=>{let a=new Set;for(let b of z)b.pay>=3500&&a.add(b.date);return a},[z]);a=(0,c.useCallback)(a=>{m(a),o(h(a)),t(new Date(a.getFullYear(),a.getMonth(),1))},[]),(0,c.useEffect)(()=>{let b=()=>a(new Date),c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate()+1,0,0,2).getTime()-c.getTime(),e=window.setTimeout(()=>{b(),e._t2=window.setInterval(b,6e4)},d);return()=>{let a=e?._t2;a&&window.clearInterval(a),window.clearTimeout(e)}},[a]),(0,c.useEffect)(()=>{0!==y.length&&(y.includes(n)||o(y[0]))},[y,n]),(0,c.useEffect)(()=>{let[a,b]=n.split("-").map(Number);a&&b&&t(new Date(a,b-1,1))},[n]);let F=(0,c.useMemo)(()=>{let a=j.trim().toLowerCase(),b=z.filter(a=>a.date===n);a&&(b=b.filter(b=>[b.title,b.company,b.city,b.address].some(b=>b.toLowerCase().includes(a)))),w.onlyHot&&(b=b.filter(a=>!!a.hot)),w.onlyPremium&&(b=b.filter(a=>a.pay>=3500)),w.types.length&&(b=b.filter(a=>w.types.includes(a.type)));let c=w.sort;return"pay_desc"===c?b=[...b].sort((a,b)=>b.pay-a.pay):"pay_asc"===c?b=[...b].sort((a,b)=>a.pay-b.pay):"premium_first"===c?b=[...b].sort((a,b)=>{let c=+(a.pay>=3500),d=+(b.pay>=3500);return d!==c?d-c:b.pay-a.pay}):"near"===c&&(b=[...b].sort((a,b)=>I(a)-I(b))),b},[j,n,z,w]),[G,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(null),M=(0,c.useCallback)(()=>J(!1),[]),N=(0,c.useCallback)(a=>{L({day:a.date,title:a.title}),J(!0)},[]);return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[d?(0,b.jsx)("input",{value:j,onChange:a=>k(a.target.value),placeholder:"Поиск: профессия, компания, город…",className:"w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-900/10",autoFocus:!0}):(0,b.jsx)("div",{className:"text-sm font-semibold",children:"Задания"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{g(a=>!a),d&&k("")},className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Поиск",title:"Поиск",children:(0,b.jsx)(e,{className:"h-5 w-5"})}),(0,b.jsx)("button",{onClick:()=>v(!0),className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Сортировать и фильтровать",title:"Сортировать и фильтровать",children:(0,b.jsx)(f,{className:"h-5 w-5"})})]})]}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-zinc-500",children:[w.onlyHot?(0,b.jsx)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:"горящие"}):null,w.onlyPremium?(0,b.jsx)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:"высокий тариф"}):null,w.types.length?(0,b.jsxs)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:["типов: ",w.types.length]}):null,"relevance"!==w.sort?(0,b.jsxs)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:["сорт: ",w.sort]}):null]})]}),(0,b.jsx)(p,{days:y,value:n,onChange:a=>o(a),hotDays:C,premiumDays:D,calendarOpen:q,onToggleCalendar:()=>r(a=>!a),month:s,availableDays:A}),0===F.length?(0,b.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-5 text-sm text-zinc-600",children:"На выбранную дату слотов нет (или они отфильтрованы)."}):(0,b.jsx)("div",{className:"space-y-3",children:F.map(a=>(0,b.jsx)(B,{slot:a,onBook:N},a.id))}),(0,b.jsx)(E,{open:G,onClose:M,days:y,slots:z,hotDays:C,premiumDays:D,initialDay:K?.day??n,initialTitle:K?.title}),(0,b.jsx)(H,{open:u,onClose:()=>v(!1),value:w,onChange:x})]})}a.s(["default",()=>J],40047)}];

//# sourceMappingURL=app_shifts_shifts-client_tsx_81e6ecc5._.js.map