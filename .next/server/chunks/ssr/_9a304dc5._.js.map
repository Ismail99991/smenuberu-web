{"version":3,"sources":["../../../../components/badge.tsx","../../../../app/shifts/%5Bid%5D/shift-details-client.tsx","../../../../lib/mock.ts","../../../../lib/application-state.ts"],"sourcesContent":["export default function Badge({ children }: { children: React.ReactNode }) {\n  return (\n    <span className=\"inline-flex items-center rounded-full border border-zinc-200 bg-white px-2.5 py-1 text-xs text-zinc-700\">\n      {children}\n    </span>\n  );\n}\n","\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\nimport Badge from \"@/components/badge\";\nimport {\n  shifts,\n  formatMoneyRub,\n  formatDayLabelRu,\n  formatWeekdayShortRu\n} from \"@/lib/mock\";\nimport {\n  getStatus,\n  setStatus,\n  type ApplicationStatus\n} from \"@/lib/application-state\";\n\nfunction StatusPill({ status }: { status: ApplicationStatus }) {\n  const text =\n    status === \"none\"\n      ? \"Не откликался\"\n      : status === \"applied\"\n        ? \"Отклик отправлен\"\n        : status === \"accepted\"\n          ? \"Принят\"\n          : \"Отклонён\";\n\n  const cls =\n    status === \"none\"\n      ? \"border-zinc-200 text-zinc-700\"\n      : status === \"applied\"\n        ? \"border-zinc-300 text-zinc-900\"\n        : status === \"accepted\"\n          ? \"border-emerald-200 text-emerald-700\"\n          : \"border-rose-200 text-rose-700\";\n\n  return (\n    <span\n      className={`inline-flex items-center rounded-full border bg-white px-3 py-1 text-xs ${cls}`}\n    >\n      {text}\n    </span>\n  );\n}\n\nexport default function ShiftDetailsClient({ id }: { id: string }) {\n  const shift = useMemo(() => shifts.find((s) => s.id === id), [id]);\n  const [status, setLocalStatus] = useState<ApplicationStatus>(\"none\");\n\n  useEffect(() => {\n    setLocalStatus(getStatus(id));\n  }, [id]);\n\n  if (!shift) {\n    return (\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n        <div className=\"text-base font-semibold\">Смена не найдена</div>\n        <p className=\"mt-1 text-sm text-zinc-600\">Возможно, ссылка устарела.</p>\n        <Link className=\"mt-4 inline-block text-sm underline\" href=\"/shifts\">\n          Вернуться к списку\n        </Link>\n      </div>\n    );\n  }\n\n  const canApply = status === \"none\" || status === \"rejected\";\n  const canCancel = status === \"applied\";\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Основное */}\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n        <div className=\"flex items-start justify-between gap-3\">\n          <div>\n            <div className=\"text-base font-semibold\">{shift.title}</div>\n            <div className=\"mt-1 text-sm text-zinc-600\">\n              {shift.company} · {shift.city}\n            </div>\n          </div>\n\n          <div className=\"text-right\">\n            <div className=\"text-base font-semibold\">\n              {formatMoneyRub(shift.pay)}\n            </div>\n            <div className=\"mt-1 text-xs text-zinc-500\">\n              {formatWeekdayShortRu(shift.date)} · {formatDayLabelRu(shift.date)} ·{\" \"}\n              {shift.time}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-3 flex flex-wrap items-center gap-2\">\n          <StatusPill status={status} />\n          {shift.tags.map((t) => (\n            <Badge key={t}>{t}</Badge>\n          ))}\n        </div>\n\n        <div className=\"mt-4 text-sm text-zinc-700\">{shift.description}</div>\n\n        <div className=\"mt-4 text-sm text-zinc-600\">\n          <div>\n            <span className=\"font-medium text-zinc-800\">Адрес:</span>{\" \"}\n            {shift.address}\n          </div>\n        </div>\n      </div>\n\n      {/* Требования */}\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n        <div className=\"text-sm font-semibold\">Требования</div>\n        <ul className=\"mt-2 list-disc space-y-1 pl-5 text-sm text-zinc-600\">\n          {shift.requirements.map((r) => (\n            <li key={r}>{r}</li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Оплата и выплаты */}\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n        <div className=\"text-sm font-semibold\">Оплата и выплаты</div>\n\n        <div className=\"mt-3 grid gap-3 text-sm\">\n          <div className=\"rounded-xl border border-zinc-200 p-4\">\n            <div className=\"font-medium text-zinc-900\">Когда платят</div>\n            <p className=\"mt-1 text-zinc-600\">\n              Обычно —{\" \"}\n              <span className=\"font-medium text-zinc-900\">\n                в течение 1–3 рабочих дней\n              </span>{\" \"}\n              после подтверждения смены заказчиком. (UI-only, правило уточним в\n              контракте)\n            </p>\n          </div>\n\n          <div className=\"rounded-xl border border-zinc-200 p-4\">\n            <div className=\"font-medium text-zinc-900\">Как считается сумма</div>\n            <ul className=\"mt-2 list-disc space-y-1 pl-5 text-zinc-600\">\n              <li>Оплата за смену фиксированная (как в карточке смены)</li>\n              <li>\n                Если есть бонусы/чаевые — они будут отдельной строкой (позже)\n              </li>\n              <li>Комиссии/налоги зависят от статуса исполнителя (позже)</li>\n            </ul>\n          </div>\n\n          <div className=\"rounded-xl border border-zinc-200 p-4\">\n            <div className=\"font-medium text-zinc-900\">Условия удержаний</div>\n            <ul className=\"mt-2 list-disc space-y-1 pl-5 text-zinc-600\">\n              <li>\n                <span className=\"font-medium text-zinc-900\">No-show</span>{\" \"}\n                (неявка без предупреждения) — возможна отмена оплаты и ограничения\n                доступа\n              </li>\n              <li>\n                <span className=\"font-medium text-zinc-900\">Опоздание</span> —\n                может уменьшить оплату (по правилам объекта/заказчика)\n              </li>\n              <li>\n                <span className=\"font-medium text-zinc-900\">\n                  Отмена в последний момент\n                </span>{\" \"}\n                — возможен штраф/понижение рейтинга (позже)\n              </li>\n            </ul>\n            <p className=\"mt-2 text-xs text-zinc-500\">\n              Это пока UX-заглушка: конкретные правила зафиксируем в продуктовой\n              политике и контракте.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Действия */}\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-5\">\n        <div className=\"flex flex-col gap-2\">\n          <button\n            disabled={!canApply}\n            onClick={() => {\n              setStatus(id, \"applied\");\n              setLocalStatus(\"applied\");\n            }}\n            className=\"inline-flex items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white disabled:opacity-50\"\n          >\n            Откликнуться\n          </button>\n\n          <button\n            disabled={!canCancel}\n            onClick={() => {\n              setStatus(id, \"none\");\n              setLocalStatus(\"none\");\n            }}\n            className=\"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900 disabled:opacity-50\"\n          >\n            Отменить отклик\n          </button>\n\n          {/* Демо-переключатель статуса (уберём позже) */}\n          <div className=\"mt-3 text-xs text-zinc-500\">\n            Демо: сменить статус →\n            <div className=\"mt-2 flex flex-wrap gap-2\">\n              {(\n                [\"none\", \"applied\", \"accepted\", \"rejected\"] as ApplicationStatus[]\n              ).map((s) => (\n                <button\n                  key={s}\n                  onClick={() => {\n                    setStatus(id, s);\n                    setLocalStatus(s);\n                  }}\n                  className=\"rounded-full border border-zinc-200 bg-white px-3 py-1\"\n                >\n                  {s}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Link\n        href=\"/shifts\"\n        className=\"block text-center text-sm text-zinc-600 underline\"\n      >\n        Назад к списку\n      </Link>\n    </div>\n  );\n}\n","export type Shift = {\n  id: string;\n  title: string;\n  company: string;\n  city: string;\n  address: string;\n\n  // Реальная дата смены (локальная), ISO-формат YYYY-MM-DD\n  date: string;\n\n  time: string; // \"10:00–19:00\"\n  pay: number; // 3500\n  tags: string[];\n  requirements: string[];\n  description: string;\n};\n\nexport const shifts: Shift[] = [\n  {\n    id: \"s1\",\n    title: \"Повар-универсал\",\n    company: \"Кафе «Лимон»\",\n    city: \"Берлин\",\n    address: \"Warschauer Str. 12\",\n    date: \"2025-12-14\",\n    time: \"10:00–19:00\",\n    pay: 3500,\n    tags: [\"Питание\", \"Форма\"],\n    requirements: [\"Опыт от 1 года\", \"Пунктуальность\", \"Полный цикл кухни\"],\n    description:\n      \"Работа на горячем/холодном цехе, подготовка заготовок, соблюдение санитарных норм.\"\n  },\n  {\n    id: \"s2\",\n    title: \"Официант\",\n    company: \"Ресторан «Север»\",\n    city: \"Берлин\",\n    address: \"Prenzlauer Allee 77\",\n    date: \"2025-12-15\",\n    time: \"12:00–21:00\",\n    pay: 2800,\n    tags: [\"Чаевые\", \"Обучение\"],\n    requirements: [\"Коммуникабельность\", \"Немецкий/английский базовый\"],\n    description:\n      \"Обслуживание гостей в зале, работа с заказами, поддержание чистоты в зоне обслуживания.\"\n  },\n  {\n    id: \"s3\",\n    title: \"Кладовщик\",\n    company: \"Склад «Nord»\",\n    city: \"Потсдам\",\n    address: \"Industriestr. 4\",\n    date: \"2025-12-20\",\n    time: \"08:00–17:00\",\n    pay: 3200,\n    tags: [\"Тёплый склад\"],\n    requirements: [\"Внимательность\", \"Готовность к физнагрузке\"],\n    description:\n      \"Приём/выдача товара, маркировка, сборка заказов, инвентаризация.\"\n  }\n];\n\nexport function formatMoneyRub(amount: number) {\n  return new Intl.NumberFormat(\"ru-RU\").format(amount) + \" ₽\";\n}\n\nexport function toISODateLocal(d: Date) {\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\n\nexport function formatDayLabelRu(isoDate: string) {\n  // isoDate: YYYY-MM-DD\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { day: \"numeric\", month: \"short\" }).format(date);\n}\n\nexport function formatWeekdayShortRu(isoDate: string) {\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { weekday: \"short\" }).format(date);\n}\n","export type ApplicationStatus = \"none\" | \"applied\" | \"accepted\" | \"rejected\";\n\nconst key = (shiftId: string) => `app_status_${shiftId}`;\n\nexport function getStatus(shiftId: string): ApplicationStatus {\n  if (typeof window === \"undefined\") return \"none\";\n  return (window.localStorage.getItem(key(shiftId)) as ApplicationStatus) || \"none\";\n}\n\nexport function setStatus(shiftId: string, status: ApplicationStatus) {\n  if (typeof window === \"undefined\") return;\n  window.localStorage.setItem(key(shiftId), status);\n}\n"],"names":[],"mappings":"sDAAe,SAAS,EAAM,UAAE,CAAQ,CAAiC,EACvE,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mHACb,GAGP,+DCJA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCaO,IAAM,EAAkB,CAC7B,CACE,GAAI,KACJ,MAAO,kBACP,QAAS,eACT,KAAM,SACN,QAAS,qBACT,KAAM,aACN,KAAM,cACN,IAAK,KACL,KAAM,CAAC,UAAW,QAAQ,CAC1B,aAAc,CAAC,iBAAkB,iBAAkB,oBAAoB,CACvE,YACE,oFACJ,EACA,CACE,GAAI,KACJ,MAAO,WACP,QAAS,mBACT,KAAM,SACN,QAAS,sBACT,KAAM,aACN,KAAM,cACN,IAAK,KACL,KAAM,CAAC,SAAU,WAAW,CAC5B,aAAc,CAAC,qBAAsB,8BAA8B,CACnE,YACE,yFACJ,EACA,CACE,GAAI,KACJ,MAAO,YACP,QAAS,eACT,KAAM,UACN,QAAS,kBACT,KAAM,aACN,KAAM,cACN,IAAK,KACL,KAAM,CAAC,eAAe,CACtB,aAAc,CAAC,iBAAkB,2BAA2B,CAC5D,YACE,kEACJ,EACD,CCnDM,SAAS,EAAU,CAAe,CAAE,CAAyB,EAGpE,CFKA,SAAS,EAAW,QAAE,CAAM,CAAiC,EAmB3D,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,wEAAwE,EAV3E,AAU6E,SAVxF,EACI,gCACW,YAAX,EACE,gCACA,AAAW,eACT,sCACA,gCAIgF,CAAK,UAnBlF,CAqBR,QArBH,EACI,gBACW,YAAX,EACE,mBACW,aAAX,EACE,SACA,YAkBZ,CAEe,SAAS,EAAmB,IAAE,CAAE,CAAkB,QAC/D,IAAM,EAAQ,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAAM,EAAO,IAAI,CAAE,AAAD,GAAO,EAAE,EAAE,GAAK,GAAK,CAAC,EAAG,EAC3D,CAAC,EAAQ,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAoB,QAM7D,GAJA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,EE7CwC,OF8C1C,EAAG,CAAC,EAAG,CADU,CAGb,CAAC,EACH,KADU,CAHe,AAKvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAA0B,qBACzC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,+BAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CAAC,UAAU,sCAAsC,KAAK,mBAAU,0BAO3E,IAAM,EAAsB,SAAX,GAAgC,aAAX,EAChC,EAAuB,YAAX,EAElB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAA2B,EAAM,KAAK,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACZ,EAAM,OAAO,CAAC,MAAI,EAAM,IAAI,OAIjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCCnBI,ADoBhB,EAAe,EAAM,ECpBS,CDoBN,CCnB9B,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC,GAAU,QDqB7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACZ,ACLR,SAAS,AAAqB,CAAe,EAClD,GAAM,CAAC,EAAG,EAAG,EAAE,CAAG,EAAQ,KAAK,CAAC,KAAK,GAAG,CAAC,QACnC,EAAO,IAAI,KAAK,EAAG,EAAI,EAAG,GAChC,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CAAE,QAAS,OAAQ,GAAG,MAAM,CAAC,EACvE,EDCoC,EAAM,IAAI,EAAE,MCZzC,ADY6C,SCZnB,AAAjB,CAAgC,EAE9C,GAAM,CAAC,EAAG,EAAG,EAAE,CAAG,EAAQ,KAAK,CAAC,KAAK,GAAG,CAAC,QACnC,EAAO,IAAI,KAAK,EAAG,EAAI,EAAG,GAChC,OAAO,IAAI,KAAK,cAAc,CAAC,QAAS,CAAE,IAAK,UAAW,MAAO,OAAQ,GAAG,MAAM,CAAC,EACrF,EDOqE,EAAM,IAAI,EAAE,KAAG,IACrE,EAAM,IAAI,UAKjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAW,OAAQ,IACnB,EAAM,IAAI,CAAC,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,UAAU,GAAJ,OAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA8B,EAAM,WAAW,GAE9D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,WAAc,IACzD,EAAM,OAAO,SAMpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,eACvC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DACX,EAAM,YAAY,CAAC,GAAG,CAAC,AAAC,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAY,GAAJ,SAMf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4DACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,qBAEvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,iBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,+BAAqB,WACvB,IACT,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,+BAEpC,IAAI,qFAMhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,wBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wDACZ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,yDACJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,kEAGJ,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,iEAIR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAA4B,sBAC3C,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,wDACZ,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,YAAe,IAAI,gFAIjE,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,cAAgB,+DAG9D,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,8BAEpC,IAAI,oDAIhB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,sGAShD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,CAAC,EACX,QAAS,KACP,EAAU,EAAI,WACd,EAAe,UACjB,EACA,UAAU,uIACX,iBAID,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,SAAU,CAAC,EACX,QAAS,KACP,EAAU,EAAI,QACd,EAAe,OACjB,EACA,UAAU,8JACX,oBAKD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAA6B,yBAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCAEX,CAAC,OAAQ,UAAW,WAAY,WAAW,CAC3C,GAAG,CAAE,AAAD,GACJ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAEC,QAAS,KACP,EAAU,EAAI,GACd,EAAe,EACjB,EACA,UAAU,kEAET,GAPI,cAejB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,UACL,UAAU,6DACX,qBAKP"}