(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58299,e=>{"use strict";var t=e.i(50795);function s({children:e}){return(0,t.jsx)("span",{className:"inline-flex items-center rounded-full border border-zinc-200 bg-white px-2.5 py-1 text-xs text-zinc-700",children:e})}e.s(["default",()=>s])},40161,e=>{"use strict";var t=e.i(50795),s=e.i(36211),l=e.i(85361);let n=(0,l.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),a=(0,l.default)("sliders-horizontal",[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]]);var i=e.i(33209);function r(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${l}`}function d(e,t){let s=new Date(e);return s.setDate(s.getDate()+t),s}function c(e){return new Intl.NumberFormat("ru-RU").format(e)+" ₽"}let o=(0,l.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),x=(0,l.default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function m(e,t){let s=new Date(e);return s.setDate(s.getDate()+t),s}function u(e){return(e.getDay()+6)%7}function h({month:e,value:l,onChange:n,availableDays:a,hotDays:r,premiumDays:d}){let c=(0,s.useMemo)(()=>{let t=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0),l=m(t,-u(t)),n=m(s,6-u(s)),a=[];for(let t=l;t<=n;t=m(t,1))a.push({iso:function(e){let t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0");return`${t}-${s}-${l}`}(t),inMonth:t.getMonth()===e.getMonth()});return{title:new Intl.DateTimeFormat("ru-RU",{month:"long",year:"numeric"}).format(e),days:a}},[e]);return(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,t.jsx)("div",{className:"px-1 pb-2 text-sm font-semibold capitalize",children:c.title}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 px-1 pb-2 text-[11px] text-zinc-500",children:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].map(e=>(0,t.jsx)("div",{className:"text-center",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 gap-1 px-1",children:c.days.map(({iso:e,inMonth:s})=>{let c=Number(e.slice(8,10)),o=e===l,x=!a||a.has(e),m=r?.has(e),u=d?.has(e);return(0,t.jsxs)("button",{onClick:()=>n(e),className:(0,i.cn)("relative h-10 rounded-xl border text-sm transition",o?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white text-zinc-900 hover:bg-zinc-50",s?"":"opacity-50",x?"":"opacity-60"),title:x?void 0:"Слотов нет (пока)",children:[(0,t.jsx)("span",{className:(0,i.cn)("font-medium",o?"text-white":"text-zinc-900"),children:c}),(0,t.jsxs)("div",{className:"absolute right-2 top-2 flex gap-1",children:[u?(0,t.jsx)("span",{className:(0,i.cn)("h-2 w-2 rounded-full",o?"bg-sky-300":"bg-sky-500")}):null,m?(0,t.jsx)("span",{className:(0,i.cn)("h-2 w-2 rounded-full",o?"bg-red-300":"bg-red-500")}):null]})]},e)})})]})}function p({days:e,value:s,onChange:l,hotDays:n,premiumDays:a,calendarOpen:r,onToggleCalendar:d,month:c,availableDays:m}){return(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center justify-between gap-2 px-1",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Календарь"}),d?(0,t.jsxs)("button",{onClick:d,className:"inline-flex items-center gap-1 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm","aria-label":"Переключить календарь",children:[r?"Табы":"Месяц",r?(0,t.jsx)(x,{className:"h-4 w-4"}):(0,t.jsx)(o,{className:"h-4 w-4"})]}):null]}),r?(0,t.jsx)(h,{month:c??new Date,value:s,onChange:l,availableDays:m,hotDays:n,premiumDays:a}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-1 [-webkit-overflow-scrolling:touch]",children:e.map(e=>{let r=e===s,d=n?.has(e),c=a?.has(e);return(0,t.jsxs)("button",{onClick:()=>l(e),className:(0,i.cn)("relative min-w-[92px] flex-shrink-0 rounded-2xl border px-3 py-2 text-left transition",r?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white text-zinc-800 hover:bg-zinc-50"),children:[(0,t.jsxs)("div",{className:"absolute right-2 top-2 flex items-center gap-1",children:[c?(0,t.jsx)("span",{className:(0,i.cn)("h-2 w-2 rounded-full",r?"bg-sky-300":"bg-sky-500"),title:"Высокий тариф"}):null,d?(0,t.jsx)("span",{className:(0,i.cn)("h-2 w-2 rounded-full",r?"bg-red-300":"bg-red-500"),title:"Горящие слоты"}):null]}),(0,t.jsx)("div",{className:(0,i.cn)("text-xs",r?"text-white/80":"text-zinc-500"),children:function(e){let[t,s,l]=e.split("-").map(Number),n=new Date(t,s-1,l);return new Intl.DateTimeFormat("ru-RU",{weekday:"short"}).format(n)}(e)}),(0,t.jsx)("div",{className:"mt-0.5 text-sm font-semibold",children:function(e){let[t,s,l]=e.split("-").map(Number),n=new Date(t,s-1,l);return new Intl.DateTimeFormat("ru-RU",{day:"numeric",month:"short"}).format(n)}(e)})]},e)})}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-3 px-1 text-[11px] text-zinc-500",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-sky-500"})," высокий тариф"]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500"})," горящие слоты"]})]})]})]})}var b=e.i(58299);let f=e=>`slot_booking_${e}`;function y(e){let t=window.localStorage.getItem(f(e));if(!t)return{status:"none",updatedAt:0};try{let e=JSON.parse(t);if(!e?.status)return{status:"none",updatedAt:0};return e}catch{if("booked"===t)return{status:"booked",updatedAt:Date.now()};return{status:"none",updatedAt:0}}}function g(e,t){let s={status:t,updatedAt:Date.now()};window.localStorage.setItem(f(e),JSON.stringify(s))}let j=(0,l.default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),v=(0,l.default)("shopping-basket",[["path",{d:"m15 11-1 9",key:"5wnq3a"}],["path",{d:"m19 11-4-7",key:"cnml18"}],["path",{d:"M2 11h20",key:"3eubbj"}],["path",{d:"m3.5 11 1.6 7.4a2 2 0 0 0 2 1.6h9.8a2 2 0 0 0 2-1.6l1.7-7.4",key:"yiazzp"}],["path",{d:"M4.5 15.5h15",key:"13mye1"}],["path",{d:"m5 11 4-7",key:"116ra9"}],["path",{d:"m9 11 1 9",key:"1ojof7"}]]),N=(0,l.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),w=(0,l.default)("utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);var k=e.i(40426);let z=(0,l.default)("spray-can",[["path",{d:"M3 3h.01",key:"159qn6"}],["path",{d:"M7 5h.01",key:"1hq22a"}],["path",{d:"M11 7h.01",key:"1osv80"}],["path",{d:"M3 7h.01",key:"1xzrh3"}],["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M3 11h.01",key:"1eifu7"}],["rect",{width:"4",height:"4",x:"15",y:"5",key:"mri9e4"}],["path",{d:"m19 9 2 2v10c0 .6-.4 1-1 1h-6c-.6 0-1-.4-1-1V11l2-2",key:"aib6hk"}],["path",{d:"m13 14 8-2",key:"1d7bmk"}],["path",{d:"m13 19 8-2",key:"1y2vml"}]]),M={driver:j,picker:v,loader:N,cook:w,waiter:k.User,cleaner:z,other:k.User};function D({type:e,className:s}){let l=M[e]??M.other;return(0,t.jsx)(l,{className:s??"h-5 w-5"})}function C({slot:e,onBook:l}){let[n,a]=(0,s.useState)("none");(0,s.useEffect)(()=>{a(y(e.id).status)},[e.id]);let i=e.pay>=3500;return(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-5",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(D,{type:e.type,className:"h-5 w-5 text-zinc-700"}),(0,t.jsx)("div",{className:"text-base font-semibold",children:e.title})]}),e.hot?(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-red-50 px-2 py-0.5 text-xs font-medium text-red-700",children:"Горящий"}):null,i?(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-sky-50 px-2 py-0.5 text-xs font-medium text-sky-700",children:"Высокий тариф"}):null,"booked"===n?(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2 py-0.5 text-xs font-medium text-emerald-700",children:"Записан"}):null,"cancelled"===n?(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-medium text-zinc-600",children:"Отменено"}):null,"completed"===n?(0,t.jsx)("span",{className:"inline-flex items-center rounded-full bg-zinc-900 px-2 py-0.5 text-xs font-medium text-white",children:"Завершено"}):null]}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-zinc-600",children:[e.company," · ",e.city]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-base font-semibold",children:c(e.pay)}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:e.time})]})]}),(0,t.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.tags.map(e=>(0,t.jsx)(b.default,{children:e},e))}),(0,t.jsx)("div",{className:"mt-3 text-sm text-zinc-600",children:e.address}),"booked"===n?(0,t.jsxs)("div",{className:"mt-4 grid gap-2",children:[(0,t.jsx)("button",{onClick:()=>{g(e.id,"cancelled"),a("cancelled")},className:"inline-flex w-full items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900",children:"Отменить запись"}),(0,t.jsx)("button",{onClick:()=>{g(e.id,"completed"),a("completed")},className:"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Отметить как завершено (demo)"})]}):"completed"===n?(0,t.jsx)("div",{className:"mt-4 rounded-xl border border-zinc-200 bg-zinc-50 p-3 text-sm text-zinc-700",children:"Смена завершена. Оценка смены — в профиле."}):(0,t.jsx)("button",{onClick:()=>l(e),className:"mt-4 inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Записаться"})]})}function S(e){let[t,s]=e.split("–").map(e=>e.trim()),[l,n]=(t??"00:00").split(":").map(Number),[a,i]=(s??"00:00").split(":").map(Number);return{start:60*(l||0)+(n||0),end:60*(a||0)+(i||0)}}function A(e,t){return e.start<t.end&&t.start<e.end}function T({open:e,onClose:l,days:n,slots:a,hotDays:i,premiumDays:r,initialDay:d,initialTitle:o}){let[x,m]=(0,s.useState)(d),[u,h]=(0,s.useState)([]),[b,f]=(0,s.useState)(!0),[j,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(m(d),h([]),f(!0),v(null))},[e,d]);let N=(0,s.useMemo)(()=>a.filter(e=>e.date===x).sort((e,t)=>S(e.time).start-S(t.time).start),[a,x]),w=(0,s.useMemo)(()=>N.map(e=>e.id),[N]),k=(0,s.useMemo)(()=>{let e=new Map;for(let t of N)e.set(t.id,t);return e},[N]),z=(0,s.useMemo)(()=>u.map(e=>k.get(e)).filter(Boolean),[u,k]),M=(0,s.useMemo)(()=>z.reduce((e,t)=>e+t.pay,0),[z]),D=e=>"booked"===y(e).status,C=e=>{let t=k.get(e);if(!t)return!1;let s=S(t.time);for(let t of u){if(t===e)continue;let l=k.get(t);if(l&&A(s,S(l.time)))return!1}for(let t of N)if(D(t.id)&&t.id!==e&&A(s,S(t.time)))return!1;return!0},T=e=>{if(!b||0===u.length)return!0;let t=w.indexOf(e);if(-1===t)return!1;let s=u.map(e=>w.indexOf(e)).filter(e=>e>=0).sort((e,t)=>e-t),l=s[0],n=s[s.length-1];return t===l-1||t===n+1},q=e=>!!u.includes(e)||!D(e)&&!!C(e)&&!!T(e);return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:l}),(0,t.jsx)("div",{className:"absolute left-1/2 top-4 w-[min(560px,calc(100%-16px))] -translate-x-1/2",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Запись на слоты"}),(0,t.jsx)("div",{className:"text-base font-semibold",children:o??"Выбери дату и слоты"})]}),(0,t.jsx)("button",{onClick:l,className:"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:"Закрыть"})]}),(0,t.jsxs)("div",{className:"space-y-3 p-4",children:[(0,t.jsx)(p,{days:n,value:x,onChange:e=>{m(e),h([]),v(null)},hotDays:i,premiumDays:r}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"Выбирать “подряд”"}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Вкл — только соседние слоты, плюс запрет пересечений по времени."})]}),(0,t.jsx)("button",{onClick:()=>{f(e=>!e),h([]),v(null)},className:"rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:b?"Вкл":"Выкл"})]}),j?(0,t.jsx)("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-3 text-sm text-rose-800",children:j}):null,0===N.length?(0,t.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 text-sm text-zinc-600",children:"На этот день слотов нет. Листай табы сверху."}):(0,t.jsx)("div",{className:"space-y-2",children:N.map(e=>{let s=u.includes(e.id),l=D(e.id),n=!s&&!q(e.id);return(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void h(e=>e.includes(t)?(v(null),e.filter(e=>e!==t)):q(t)?(v(null),[...e,t]):(D(t)?v("Этот слот уже забронирован."):C(t)?T(t)?v("Нельзя выбрать этот слот."):v("В режиме “подряд” можно добавлять только соседние слоты (слева/справа)."):v("Нельзя выбрать: слот пересекается по времени с выбранным или уже забронированным."),e))},disabled:n,className:["w-full rounded-2xl border p-4 text-left transition",s?"border-zinc-900 bg-zinc-50":"border-zinc-200 hover:bg-zinc-50",n?"opacity-50 cursor-not-allowed":""].join(" "),title:l?"Уже записан на этот слот":void 0,children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:["inline-flex h-5 w-5 items-center justify-center rounded-md border text-xs",s?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-300 bg-white"].join(" "),children:s?"✓":""}),(0,t.jsxs)("div",{className:"font-semibold",children:[e.title,e.hot?(0,t.jsx)("span",{className:"ml-2 text-xs text-red-600",children:"• горячий"}):null,e.pay>=3500?(0,t.jsx)("span",{className:"ml-2 text-xs text-sky-700",children:"• высокий тариф"}):null,l?(0,t.jsx)("span",{className:"ml-2 text-xs text-emerald-700",children:"• уже записан"}):null]})]}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-zinc-600",children:[e.company," · ",e.city]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:e.time}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:c(e.pay)})]})]})},e.id)})}),(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-zinc-600",children:"Выбрано слотов:"}),(0,t.jsx)("span",{className:"font-semibold",children:u.length})]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-zinc-600",children:"Итого оплата:"}),(0,t.jsx)("span",{className:"font-semibold",children:c(M)})]})]}),(0,t.jsxs)("button",{disabled:0===u.length,onClick:()=>{let e=z.map(e=>({id:e.id,r:S(e.time)}));for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++)if(A(e[t].r,e[s].r))return void v("Есть пересекающиеся по времени слоты. Убери конфликт и попробуй снова.");for(let e of u)g(e,"booked");l()},className:"inline-flex w-full items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white disabled:opacity-50",children:["Подтвердить запись (",u.length,")"]}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"UI-only: бронь сохраняется в localStorage. Пересечения по времени запрещены."})]})]})})]}):null}let q=(0,l.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),F=[{value:"driver",label:"Водитель / логистика"},{value:"picker",label:"Сборщик"},{value:"loader",label:"Грузчик"},{value:"cook",label:"Повар"},{value:"waiter",label:"Официант"},{value:"cleaner",label:"Уборка"},{value:"other",label:"Другое"}];function H({open:e,onClose:s,value:l,onChange:n}){return e?(0,t.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:s}),(0,t.jsx)("div",{className:"absolute left-1/2 top-6 w-[min(560px,calc(100%-16px))] -translate-x-1/2",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white shadow-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 border-b border-zinc-200 p-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Задания"}),(0,t.jsx)("div",{className:"text-base font-semibold",children:"Сортировать и фильтровать"})]}),(0,t.jsx)("button",{onClick:s,className:"rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Закрыть",children:(0,t.jsx)(q,{className:"h-5 w-5"})})]}),(0,t.jsxs)("div",{className:"space-y-4 p-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Сортировка"}),(0,t.jsx)("div",{className:"mt-3 grid gap-2",children:[{k:"relevance",label:"По умолчанию"},{k:"pay_desc",label:"По цене: сначала дороже"},{k:"pay_asc",label:"По цене: сначала дешевле"},{k:"premium_first",label:"Сначала высокий тариф"},{k:"near",label:"По близости (пока заглушка)"}].map(e=>(0,t.jsx)("button",{onClick:()=>n({...l,sort:e.k}),className:["w-full rounded-xl border px-3 py-2 text-left text-sm",l.sort===e.k?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white hover:bg-zinc-50"].join(" "),children:e.label},e.k))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Фильтры"}),(0,t.jsxs)("div",{className:"mt-3 grid gap-2",children:[(0,t.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:[(0,t.jsx)("span",{children:"Только “горящие”"}),(0,t.jsx)("input",{type:"checkbox",checked:l.onlyHot,onChange:e=>n({...l,onlyHot:e.target.checked}),className:"h-4 w-4"})]}),(0,t.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm",children:[(0,t.jsx)("span",{children:"Только “высокий тариф”"}),(0,t.jsx)("input",{type:"checkbox",checked:l.onlyPremium,onChange:e=>n({...l,onlyPremium:e.target.checked}),className:"h-4 w-4"})]})]}),(0,t.jsx)("div",{className:"mt-4 text-sm font-semibold",children:"Тип задания"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:F.map(e=>(0,t.jsx)("button",{onClick:()=>{var t;let s;return t=e.value,s=l.types.includes(t)?l.types.filter(e=>e!==t):[...l.types,t],void n({...l,types:s})},className:["rounded-full border px-3 py-1 text-sm",l.types.includes(e.value)?"border-zinc-900 bg-zinc-900 text-white":"border-zinc-200 bg-white hover:bg-zinc-50"].join(" "),children:e.label},e.value))}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Если типы не выбраны — показываем все."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsx)("button",{onClick:()=>{n({onlyHot:!1,onlyPremium:!1,types:[],sort:"relevance"})},className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white px-4 py-3 text-sm font-medium text-zinc-900",children:"Сбросить"}),(0,t.jsx)("button",{onClick:s,className:"inline-flex items-center justify-center rounded-xl bg-zinc-900 px-4 py-3 text-sm font-medium text-white",children:"Применить"})]}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"UI-only: “близость” сейчас считается условно (детерминированно по городу/адресу)."})]})]})})]}):null}function $(e){let t=`${e.city}|${e.address}|${e.company}`,s=0;for(let e=0;e<t.length;e++)s=31*s+t.charCodeAt(e)>>>0;return s}function I(){var e;let[l,i]=(0,s.useState)(!1),[c,o]=(0,s.useState)(""),[x,m]=(0,s.useState)(()=>new Date),[u,h]=(0,s.useState)(()=>r(new Date)),[b,f]=(0,s.useState)(!1),[y,g]=(0,s.useState)(()=>new Date),[j,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)({onlyHot:!1,onlyPremium:!1,types:[],sort:"relevance"}),k=(0,s.useMemo)(()=>(function(e,t=14){let s=[];for(let l=0;l<t;l++)s.push(r(d(e,l)));return s})(x,14),[x]),z=(0,s.useMemo)(()=>(function(e,t=14){let s=[];for(let l=0;l<t;l++){let t=r(d(e,l)),n=l%4==0?0:l%2==0?2:1,a=l%3==0;for(let e=0;e<n;e++){let l=`${t}-slot-${e+1}`,n=a&&0===e,i=e%4,r=0===i?{type:"cook",title:"Повар-универсал",company:"Кафе «Лимон»",city:"Берлин",address:"Warschauer Str. 12",time:"10:00–19:00",pay:3500,tags:["Питание","Форма"]}:1===i?{type:"waiter",title:"Официант",company:"Ресторан «Север»",city:"Берлин",address:"Prenzlauer Allee 77",time:"12:00–21:00",pay:2800,tags:["Чаевые","Обучение"]}:2===i?{type:"loader",title:"Грузчик (склад)",company:"Склад «Nord»",city:"Потсдам",address:"Industriestr. 4",time:"08:00–15:00",pay:3200,tags:["Тёплый склад","Физ. нагрузка"]}:{type:"driver",title:"Водитель (забор → доставка)",company:"Логистика «Sprint»",city:"Берлин",address:"Pickup: Alexanderplatz",time:"14:00–19:00",pay:4200,tags:["Кат. B","Навигация"]};s.push({id:l,date:t,hot:n,...r})}}return s})(x,14),[x]),M=(0,s.useMemo)(()=>new Set(z.map(e=>e.date)),[z]),D=(0,s.useMemo)(()=>{let e=new Set;for(let t of z)t.hot&&e.add(t.date);return e},[z]),S=(0,s.useMemo)(()=>{let e=new Set;for(let t of z)t.pay>=3500&&e.add(t.date);return e},[z]);e=(0,s.useCallback)(e=>{m(e),h(r(e)),g(new Date(e.getFullYear(),e.getMonth(),1))},[]),(0,s.useEffect)(()=>{let t=()=>e(new Date),s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1,0,0,2).getTime()-s.getTime(),n=window.setTimeout(()=>{t(),n._t2=window.setInterval(t,6e4)},l);return()=>{let e=n?._t2;e&&window.clearInterval(e),window.clearTimeout(n)}},[e]),(0,s.useEffect)(()=>{0!==k.length&&(k.includes(u)||h(k[0]))},[k,u]),(0,s.useEffect)(()=>{let[e,t]=u.split("-").map(Number);e&&t&&g(new Date(e,t-1,1))},[u]);let A=(0,s.useMemo)(()=>{let e=c.trim().toLowerCase(),t=z.filter(e=>e.date===u);e&&(t=t.filter(t=>[t.title,t.company,t.city,t.address].some(t=>t.toLowerCase().includes(e)))),N.onlyHot&&(t=t.filter(e=>!!e.hot)),N.onlyPremium&&(t=t.filter(e=>e.pay>=3500)),N.types.length&&(t=t.filter(e=>N.types.includes(e.type)));let s=N.sort;return"pay_desc"===s?t=[...t].sort((e,t)=>t.pay-e.pay):"pay_asc"===s?t=[...t].sort((e,t)=>e.pay-t.pay):"premium_first"===s?t=[...t].sort((e,t)=>{let s=+(e.pay>=3500),l=+(t.pay>=3500);return l!==s?l-s:t.pay-e.pay}):"near"===s&&(t=[...t].sort((e,t)=>$(e)-$(t))),t},[c,u,z,N]),[q,F]=(0,s.useState)(!1),[I,P]=(0,s.useState)(null),U=(0,s.useCallback)(()=>F(!1),[]),_=(0,s.useCallback)(e=>{P({day:e.date,title:e.title}),F(!0)},[]);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[l?(0,t.jsx)("input",{value:c,onChange:e=>o(e.target.value),placeholder:"Поиск: профессия, компания, город…",className:"w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-900/10",autoFocus:!0}):(0,t.jsx)("div",{className:"text-sm font-semibold",children:"Задания"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{i(e=>!e),l&&o("")},className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Поиск",title:"Поиск",children:(0,t.jsx)(n,{className:"h-5 w-5"})}),(0,t.jsx)("button",{onClick:()=>v(!0),className:"inline-flex items-center justify-center rounded-xl border border-zinc-200 bg-white p-2","aria-label":"Сортировать и фильтровать",title:"Сортировать и фильтровать",children:(0,t.jsx)(a,{className:"h-5 w-5"})})]})]}),(0,t.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-zinc-500",children:[N.onlyHot?(0,t.jsx)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:"горящие"}):null,N.onlyPremium?(0,t.jsx)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:"высокий тариф"}):null,N.types.length?(0,t.jsxs)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:["типов: ",N.types.length]}):null,"relevance"!==N.sort?(0,t.jsxs)("span",{className:"rounded-full border border-zinc-200 bg-white px-2 py-0.5",children:["сорт: ",N.sort]}):null]})]}),(0,t.jsx)(p,{days:k,value:u,onChange:e=>h(e),hotDays:D,premiumDays:S,calendarOpen:b,onToggleCalendar:()=>f(e=>!e),month:y,availableDays:M}),0===A.length?(0,t.jsx)("div",{className:"rounded-2xl border border-zinc-200 bg-white p-5 text-sm text-zinc-600",children:"На выбранную дату слотов нет (или они отфильтрованы)."}):(0,t.jsx)("div",{className:"space-y-3",children:A.map(e=>(0,t.jsx)(C,{slot:e,onBook:_},e.id))}),(0,t.jsx)(T,{open:q,onClose:U,days:k,slots:z,hotDays:D,premiumDays:S,initialDay:I?.day??u,initialTitle:I?.title}),(0,t.jsx)(H,{open:j,onClose:()=>v(!1),value:N,onChange:w})]})}e.s(["default",()=>I],40161)}]);