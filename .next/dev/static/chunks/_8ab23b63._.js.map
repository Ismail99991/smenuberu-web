{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/smenuberu-web/lib/slots.ts"],"sourcesContent":["export type Slot = {\n  id: string;\n  date: string; // YYYY-MM-DD (local)\n  title: string;\n  company: string;\n  city: string;\n  address: string;\n  time: string; // \"10:00–19:00\"\n  pay: number;\n  hot?: boolean; // \"горящий слот\"\n  tags: string[];\n};\n\nexport function toISODateLocal(d: Date) {\n  const y = d.getFullYear();\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\n  const day = String(d.getDate()).padStart(2, \"0\");\n  return `${y}-${m}-${day}`;\n}\n\nexport function addDays(d: Date, n: number) {\n  const x = new Date(d);\n  x.setDate(x.getDate() + n);\n  return x;\n}\n\nexport function formatDayLabelRu(isoDate: string) {\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { day: \"numeric\", month: \"short\" }).format(date);\n}\n\nexport function formatWeekdayShortRu(isoDate: string) {\n  const [y, m, d] = isoDate.split(\"-\").map(Number);\n  const date = new Date(y, m - 1, d);\n  return new Intl.DateTimeFormat(\"ru-RU\", { weekday: \"short\" }).format(date);\n}\n\nexport function formatMoneyRub(amount: number) {\n  return new Intl.NumberFormat(\"ru-RU\").format(amount) + \" ₽\";\n}\n\n// Генератор “условных” слотов на 14 дней вперёд.\n// Горячие слоты: каждый 3-й день, и ещё один случайный слот в этот день.\nexport function getMockSlots(start: Date, days = 14): Slot[] {\n  const out: Slot[] = [];\n\n  for (let i = 0; i < days; i++) {\n    const date = toISODateLocal(addDays(start, i));\n\n    // 0..2 слота в день (чтобы были пустые дни)\n    const count = (i % 4 === 0) ? 0 : (i % 2 === 0 ? 2 : 1);\n    const hotDay = i % 3 === 0; // условно “горящие дни”\n\n    for (let j = 0; j < count; j++) {\n      const id = `${date}-slot-${j + 1}`;\n      const hot = hotDay && j === 0; // первый слот в “горящий день” — горячий\n\n      const template = (j % 3);\n      const base =\n        template === 0\n          ? {\n              title: \"Повар-универсал\",\n              company: \"Кафе «Лимон»\",\n              city: \"Берлин\",\n              address: \"Warschauer Str. 12\",\n              time: \"10:00–19:00\",\n              pay: 3500,\n              tags: [\"Питание\", \"Форма\"]\n            }\n          : template === 1\n            ? {\n                title: \"Официант\",\n                company: \"Ресторан «Север»\",\n                city: \"Берлин\",\n                address: \"Prenzlauer Allee 77\",\n                time: \"12:00–21:00\",\n                pay: 2800,\n                tags: [\"Чаевые\", \"Обучение\"]\n              }\n            : {\n                title: \"Кладовщик\",\n                company: \"Склад «Nord»\",\n                city: \"Потсдам\",\n                address: \"Industriestr. 4\",\n                time: \"08:00–17:00\",\n                pay: 3200,\n                tags: [\"Тёплый склад\"]\n              };\n\n      out.push({\n        id,\n        date,\n        hot,\n        ...base\n      });\n    }\n  }\n\n  return out;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAaO,SAAS,eAAe,CAAO;IACpC,MAAM,IAAI,EAAE,WAAW;IACvB,MAAM,IAAI,OAAO,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IAC/C,MAAM,MAAM,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC5C,OAAO,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK;AAC3B;AAEO,SAAS,QAAQ,CAAO,EAAE,CAAS;IACxC,MAAM,IAAI,IAAI,KAAK;IACnB,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;IACxB,OAAO;AACT;AAEO,SAAS,iBAAiB,OAAe;IAC9C,MAAM,CAAC,GAAG,GAAG,EAAE,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IACzC,MAAM,OAAO,IAAI,KAAK,GAAG,IAAI,GAAG;IAChC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QAAE,KAAK;QAAW,OAAO;IAAQ,GAAG,MAAM,CAAC;AACrF;AAEO,SAAS,qBAAqB,OAAe;IAClD,MAAM,CAAC,GAAG,GAAG,EAAE,GAAG,QAAQ,KAAK,CAAC,KAAK,GAAG,CAAC;IACzC,MAAM,OAAO,IAAI,KAAK,GAAG,IAAI,GAAG;IAChC,OAAO,IAAI,KAAK,cAAc,CAAC,SAAS;QAAE,SAAS;IAAQ,GAAG,MAAM,CAAC;AACvE;AAEO,SAAS,eAAe,MAAc;IAC3C,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS,MAAM,CAAC,UAAU;AACzD;AAIO,SAAS,aAAa,KAAW,EAAE,OAAO,EAAE;IACjD,MAAM,MAAc,EAAE;IAEtB,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,IAAK;QAC7B,MAAM,OAAO,eAAe,QAAQ,OAAO;QAE3C,4CAA4C;QAC5C,MAAM,QAAQ,AAAC,IAAI,MAAM,IAAK,IAAK,IAAI,MAAM,IAAI,IAAI;QACrD,MAAM,SAAS,IAAI,MAAM,GAAG,wBAAwB;QAEpD,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,IAAK;YAC9B,MAAM,KAAK,GAAG,KAAK,MAAM,EAAE,IAAI,GAAG;YAClC,MAAM,MAAM,UAAU,MAAM,GAAG,yCAAyC;YAExE,MAAM,WAAY,IAAI;YACtB,MAAM,OACJ,aAAa,IACT;gBACE,OAAO;gBACP,SAAS;gBACT,MAAM;gBACN,SAAS;gBACT,MAAM;gBACN,KAAK;gBACL,MAAM;oBAAC;oBAAW;iBAAQ;YAC5B,IACA,aAAa,IACX;gBACE,OAAO;gBACP,SAAS;gBACT,MAAM;gBACN,SAAS;gBACT,MAAM;gBACN,KAAK;gBACL,MAAM;oBAAC;oBAAU;iBAAW;YAC9B,IACA;gBACE,OAAO;gBACP,SAAS;gBACT,MAAM;gBACN,SAAS;gBACT,MAAM;gBACN,KAAK;gBACL,MAAM;oBAAC;iBAAe;YACxB;YAER,IAAI,IAAI,CAAC;gBACP;gBACA;gBACA;gBACA,GAAG,IAAI;YACT;QACF;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 108, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/smenuberu-web/components/day-tabs.tsx"],"sourcesContent":["\"use client\";\n\nimport { cn } from \"@/lib/cn\";\nimport { formatDayLabelRu, formatWeekdayShortRu } from \"@/lib/slots\";\n\ntype Props = {\n  days: string[]; // ISO YYYY-MM-DD\n  value: string; // selected ISO\n  onChange: (iso: string) => void;\n  hotDays?: Set<string>; // дни, где есть горящие слоты\n};\n\nexport default function DayTabs({ days, value, onChange, hotDays }: Props) {\n  return (\n    <div className=\"rounded-2xl border border-zinc-200 bg-white p-3\">\n      <div className=\"flex gap-2 overflow-x-auto pb-1 [-webkit-overflow-scrolling:touch]\">\n        {days.map((iso) => {\n          const active = iso === value;\n          const isHot = hotDays?.has(iso);\n\n          return (\n            <button\n              key={iso}\n              onClick={() => onChange(iso)}\n              className={cn(\n                \"relative min-w-[92px] flex-shrink-0 rounded-2xl border px-3 py-2 text-left transition\",\n                active\n                  ? \"border-zinc-900 bg-zinc-900 text-white\"\n                  : \"border-zinc-200 bg-white text-zinc-800 hover:bg-zinc-50\"\n              )}\n            >\n              {/* красная точка “горящего дня” */}\n              {isHot ? (\n                <span\n                  className={cn(\n                    \"absolute right-2 top-2 h-2 w-2 rounded-full\",\n                    active ? \"bg-red-300\" : \"bg-red-500\"\n                  )}\n                  aria-label=\"Есть горящие слоты\"\n                />\n              ) : null}\n\n              <div className={cn(\"text-xs\", active ? \"text-white/80\" : \"text-zinc-500\")}>\n                {formatWeekdayShortRu(iso)}\n              </div>\n              <div className=\"mt-0.5 text-sm font-semibold\">{formatDayLabelRu(iso)}</div>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYe,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAS;IACvE,qBACE,6TAAC;QAAI,WAAU;kBACb,cAAA,6TAAC;YAAI,WAAU;sBACZ,KAAK,GAAG,CAAC,CAAC;gBACT,MAAM,SAAS,QAAQ;gBACvB,MAAM,QAAQ,SAAS,IAAI;gBAE3B,qBACE,6TAAC;oBAEC,SAAS,IAAM,SAAS;oBACxB,WAAW,IAAA,kHAAE,EACX,yFACA,SACI,2CACA;;wBAIL,sBACC,6TAAC;4BACC,WAAW,IAAA,kHAAE,EACX,+CACA,SAAS,eAAe;4BAE1B,cAAW;;;;;mCAEX;sCAEJ,6TAAC;4BAAI,WAAW,IAAA,kHAAE,EAAC,WAAW,SAAS,kBAAkB;sCACtD,IAAA,uIAAoB,EAAC;;;;;;sCAExB,6TAAC;4BAAI,WAAU;sCAAgC,IAAA,mIAAgB,EAAC;;;;;;;mBAvB3D;;;;;YA0BX;;;;;;;;;;;AAIR;KAxCwB"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///workspaces/smenuberu-web/app/shifts/shifts-client.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport DayTabs from \"@/components/day-tabs\";\nimport SlotCard from \"@/components/slot-card\";\nimport BookingModal from \"@/components/booking-modal\";\nimport { addDays, getMockSlots, toISODateLocal } from \"@/lib/slots\";\nimport type { Slot } from \"@/lib/slots\";\n\nfunction getDaysWindow(from: Date, windowDays = 14) {\n  const out: string[] = [];\n  for (let i = 0; i < windowDays; i++) out.push(toISODateLocal(addDays(from, i)));\n  return out;\n}\n\n// авто-обновление “сегодня” в полночь\nfunction useAutoTodayRollover(onRollover: (now: Date) => void) {\n  useEffect(() => {\n    const tick = () => onRollover(new Date());\n\n    const now = new Date();\n    const nextMidnight = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 2);\n    const msToMidnight = nextMidnight.getTime() - now.getTime();\n\n    const t1 = window.setTimeout(() => {\n      tick();\n      const t2 = window.setInterval(tick, 60_000);\n      // eslint-disable-next-line consistent-return\n      return () => window.clearInterval(t2);\n    }, msToMidnight);\n\n    return () => window.clearTimeout(t1);\n  }, [onRollover]);\n}\n\nexport default function ShiftsClient() {\n  const [q, setQ] = useState(\"\");\n  const [today, setToday] = useState<Date>(() => new Date());\n  const [selectedDay, setSelectedDay] = useState<string>(() => toISODateLocal(new Date()));\n\n  // слоты генерим на базе текущего today (перегенерится на новый день)\n  const slots = useMemo(() => getMockSlots(today, 14), [today]);\n\n  const days = useMemo(() => getDaysWindow(today, 14), [today]);\n\n  // какие дни “горящие”\n  const hotDays = useMemo(() => {\n    const s = new Set<string>();\n    for (const x of slots) if (x.hot) s.add(x.date);\n    return s;\n  }, [slots]);\n\n  useAutoTodayRollover((now) => {\n    setToday(now);\n    setSelectedDay(toISODateLocal(now));\n  });\n\n  // если по какой-то причине selectedDay выпал — возвращаем к первому табу\n  useEffect(() => {\n    if (!days.includes(selectedDay)) setSelectedDay(days[0] ?? toISODateLocal(new Date()));\n  }, [days, selectedDay]);\n\n  const filtered = useMemo(() => {\n    const s = q.trim().toLowerCase();\n\n    return slots\n      .filter((x) => x.date === selectedDay)\n      .filter((x) => {\n        if (!s) return true;\n        return [x.title, x.company, x.city].some((v) => v.toLowerCase().includes(s));\n      });\n  }, [q, selectedDay, slots]);\n\n  // модалка “записаться”\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalPreset, setModalPreset] = useState<{ day: string; title?: string } | null>(null);\n\n  const openBooking = (slot: Slot) => {\n    setModalPreset({ day: slot.date, title: slot.title });\n    setModalOpen(true);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <DayTabs days={days} value={selectedDay} onChange={setSelectedDay} hotDays={hotDays} />\n\n      <div className=\"rounded-2xl border border-zinc-200 bg-white p-4\">\n        <input\n          value={q}\n          onChange={(e) => setQ(e.target.value)}\n          placeholder=\"Поиск: профессия, компания, город…\"\n          className=\"w-full rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm outline-none focus:ring-2 focus:ring-zinc-900/10\"\n        />\n      </div>\n\n      {filtered.length === 0 ? (\n        <div className=\"rounded-2xl border border-zinc-200 bg-white p-5 text-sm text-zinc-600\">\n          На выбранную дату слотов нет. Листай дни табами сверху.\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {filtered.map((slot) => (\n            <SlotCard key={slot.id} slot={slot} onBook={openBooking} />\n          ))}\n        </div>\n      )}\n\n      <BookingModal\n        open={modalOpen}\n        onClose={() => setModalOpen(false)}\n        days={days}\n        slots={slots}\n        hotDays={hotDays}\n        initialDay={modalPreset?.day ?? selectedDay}\n        initialTitle={modalPreset?.title}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}